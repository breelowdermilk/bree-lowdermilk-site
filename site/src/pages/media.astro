---
import Layout from '~/layouts/PageLayout.astro';
import GLightboxInit from '~/components/media/GLightboxInit.astro';
import HeroCarouselGLightbox from '~/components/media/HeroCarouselGLightbox.astro';
import FeaturedReleases from '~/components/media/FeaturedReleases.astro';
import VideoGalleryGLightbox from '~/components/media/VideoGalleryGLightbox.astro';
import StreamingLinksHub from '~/components/media/StreamingLinksHub.astro';

// Import data
import featuredItems from '~/data/media/featured';
import albums from '~/data/media/albums';
import videoItems from '~/data/media/video';

const metadata = {
  title: 'Media | Bree Lowdermilk',
  description: 'Award-winning composer behind The Mad Ones, with 30+ million streams. Explore music, videos, and streaming platforms.',
  openGraph: {
    title: 'Media | Bree Lowdermilk - Composer & Lyricist',
    description: 'Listen to award-winning compositions and watch performances by Bree Lowdermilk',
    type: 'website'
  }
};
---

<Layout metadata={metadata}>
  <!-- Import Bree Theme CSS -->
  <link rel="stylesheet" href="/src/assets/styles/bree-theme.css">

  <!-- Hero Section with Bree Theme -->
  <section class="media-section" style="padding-top: 40px; padding-bottom: 60px;">
    <div class="media-container text-center">
      <div class="featured-content" style="padding: 60px 48px;">
        <h1 class="bree-h1 mb-6">Media</h1>
        <p class="text-xl mb-8 max-w-3xl mx-auto" style="color: var(--text-medium); font-family: var(--font-body);">
          Award-winning composer behind <em>The Mad Ones</em>, with 30+ million streams. 
          Explore recordings, live performances, and official videos.
        </p>
        
        <!-- Recognition Stats -->
        <div class="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto mt-12">
          <div class="media-card p-6">
            <div class="text-3xl font-bold mb-2" style="color: var(--red-primary); font-family: var(--font-title);">30M+</div>
            <div class="text-sm font-medium" style="color: var(--text-dark); font-family: var(--font-headers); text-transform: uppercase; letter-spacing: 0.05em;">STREAMS</div>
          </div>
          <div class="media-card p-6">
            <div class="text-3xl font-bold mb-2" style="color: var(--red-primary); font-family: var(--font-title);">Off-Broadway</div>
            <div class="text-sm font-medium" style="color: var(--text-dark); font-family: var(--font-headers); text-transform: uppercase; letter-spacing: 0.05em;">THE MAD ONES</div>
          </div>
          <div class="media-card p-6">
            <div class="text-3xl font-bold mb-2" style="color: var(--red-primary); font-family: var(--font-title);">Awards</div>
            <div class="text-sm font-medium" style="color: var(--text-dark); font-family: var(--font-headers); text-transform: uppercase; letter-spacing: 0.05em;">LARSON, MENKEN, RODGERS</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- GLightbox Initialization -->
  <GLightboxInit />
  
  <!-- Hero Carousel Section -->
  <section class="relative">
    <HeroCarouselGLightbox items={featuredItems} autoRotate={true} rotationInterval={8000} />
  </section>


  <!-- Featured Albums Section -->
  <section class="media-section" style="background: rgba(249, 250, 251, 0.5);">
    <div class="media-container">
      <h2 class="bree-h2 mb-8 text-center">Featured Albums</h2>
      <p class="text-lg mb-12 text-center max-w-4xl mx-auto" style="color: var(--text-medium); font-family: var(--font-body);">
        Complete discography including studio recordings, live albums, and chart-toppers.
      </p>
      <div class="media-card p-8">
        <FeaturedReleases albums={albums} />
      </div>
    </div>
  </section>

  <!-- Video Gallery Section -->
  <section class="media-section">
    <div class="media-container">
      <h2 class="bree-h2 mb-8 text-center">Video Gallery</h2>
      <p class="text-lg mb-12 text-center max-w-4xl mx-auto" style="color: var(--text-medium); font-family: var(--font-body);">
        Official performances, live recordings, and collaborations with Broadway stars.
      </p>
      <div class="media-card p-8">
        <VideoGalleryGLightbox videos={videoItems} />
      </div>
    </div>
  </section>

  <!-- Streaming Links Hub Section -->
  <section class="media-section" style="background: rgba(249, 250, 251, 0.5);">
    <div class="media-container">
      <h2 class="bree-h2 mb-8 text-center">Listen Everywhere</h2>
      <p class="text-lg mb-12 text-center max-w-4xl mx-auto" style="color: var(--text-medium); font-family: var(--font-body);">
        Stream on all major platforms. Find your favorite songs and discover new ones.
      </p>
      <div class="media-card p-8">
        <StreamingLinksHub items={featuredItems} />
      </div>
    </div>
  </section>

</Layout>

<style>
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
  
  /* Section transitions */
  section {
    scroll-margin-top: 2rem;
  }
  
  /* Gradient dividers animation */
  .bg-gradient-to-r {
    background-size: 200% 200%;
    animation: gradient 3s ease infinite;
  }
  
  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* Enhanced focus states for accessibility */
  a:focus-visible, button:focus-visible {
    outline: 2px solid #3B82F6;
    outline-offset: 2px;
  }
  
  /* Performance optimizations */
  img {
    content-visibility: auto;
  }
  
  /* Stats badges hover effect */
  .bg-white.dark\:bg-gray-800:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.1);
  }
  
  .dark .bg-white.dark\:bg-gray-800:hover {
    box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.3);
  }
  
  /* Call to action button enhancements */
  .transform.hover\:-translate-y-1:hover {
    transform: translateY(-4px) scale(1.02);
  }
  
  /* Responsive typography improvements */
  @media (max-width: 640px) {
    h1 {
      font-size: 2rem;
      line-height: 1.2;
    }
    
    .text-lg {
      font-size: 1rem;
    }
    
    .py-6 {
      padding-top: 1rem;
      padding-bottom: 1rem;
    }
    
    .py-8 {
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
    }
    
    .py-4 {
      padding-top: 0.75rem;
      padding-bottom: 0.75rem;
    }
  }
  
  /* Dark mode enhancements */
  .dark {
    color-scheme: dark;
  }
  
  .dark .bg-gray-50 {
    background-color: rgb(17 24 39);
  }
  
  .dark .bg-white {
    background-color: rgb(31 41 55);
  }
</style>

<script>
  // Intersection Observer for scroll animations
  const observeElements = () => {
    const elements = document.querySelectorAll('section');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '50px'
    });
    
    elements.forEach((el) => {
      el.style.opacity = '0.95';
      el.style.transform = 'translateY(10px)';
      el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(el);
    });
  };
  
  // Enhanced page performance tracking
  const trackPagePerformance = () => {
    // Track largest contentful paint
    new PerformanceObserver((list) => {
      const entries = list.getEntries();
      entries.forEach((entry) => {
        console.log('LCP:', entry.startTime);
      });
    }).observe({ type: 'largest-contentful-paint', buffered: true });
  };
  
  // Initialize when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    observeElements();
    trackPagePerformance();
  });
  
  // Preload critical resources
  const preloadResources = () => {
    // Preload hero carousel images
    const heroImages = [
      'https://img.youtube.com/vi/jVwtGU3KOro/maxresdefault.jpg',
      'https://img.youtube.com/vi/M7lc1UVf-VE/maxresdefault.jpg',
      'https://img.youtube.com/vi/PFlaiSCZAcU/maxresdefault.jpg',
      'https://img.youtube.com/vi/Gt76Mf6yAEo/maxresdefault.jpg'
    ];
    
    heroImages.forEach((src) => {
      const link = document.createElement('link');
      link.rel = 'preload';
      link.as = 'image';
      link.href = src;
      document.head.appendChild(link);
    });
  };
  
  // Preload resources on page load
  window.addEventListener('load', preloadResources);
</script>