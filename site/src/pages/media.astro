---
import Layout from '~/layouts/PageLayout.astro';
import HeroCarousel from '~/components/media/HeroCarousel.astro';
import FeaturedReleases from '~/components/media/FeaturedReleases.astro';
import VideoGallery from '~/components/media/VideoGallery.astro';
import StreamingLinksHub from '~/components/media/StreamingLinksHub.astro';

// Import data
import featuredItems from '~/data/media/featured';
import albums from '~/data/media/albums';
import videoItems from '~/data/media/video';

const metadata = {
  title: 'Media | Bree Lowdermilk',
  description: 'Explore Bree Lowdermilk\'s music, videos, and streaming platforms. Listen to acclaimed albums like The Mad Ones and Our First Mistake, watch live performances and collaborations.',
  openGraph: {
    title: 'Media | Bree Lowdermilk - Composer & Lyricist',
    description: 'Listen to award-winning compositions and watch performances by Bree Lowdermilk',
    type: 'website'
  }
};
---

<Layout metadata={metadata}>
  <!-- Hero Carousel Section -->
  <section class="relative">
    <HeroCarousel items={featuredItems} autoRotate={true} rotationInterval={8000} />
  </section>


  <!-- Featured Albums Section -->
  <section class="py-2 bg-white dark:bg-gray-800">
    <FeaturedReleases 
      albums={albums}
    />
  </section>

  <!-- Section Divider -->
  <div class="bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 h-1"></div>

  <!-- Video Gallery Section -->
  <section class="py-2 bg-gray-50 dark:bg-gray-900">
    <VideoGallery 
      videos={videoItems}
    />
  </section>

  <!-- Section Divider -->
  <div class="bg-gradient-to-r from-pink-500 via-red-500 to-orange-500 h-1"></div>

  <!-- Streaming Links Hub Section -->
  <section class="py-2 bg-white dark:bg-gray-800">
    <StreamingLinksHub 
      items={featuredItems}
    />
  </section>

</Layout>

<style>
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
  
  /* Section transitions */
  section {
    scroll-margin-top: 2rem;
  }
  
  /* Gradient dividers animation */
  .bg-gradient-to-r {
    background-size: 200% 200%;
    animation: gradient 3s ease infinite;
  }
  
  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* Enhanced focus states for accessibility */
  a:focus-visible, button:focus-visible {
    outline: 2px solid #3B82F6;
    outline-offset: 2px;
  }
  
  /* Performance optimizations */
  img {
    content-visibility: auto;
  }
  
  /* Stats badges hover effect */
  .bg-white.dark\:bg-gray-800:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.1);
  }
  
  .dark .bg-white.dark\:bg-gray-800:hover {
    box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.3);
  }
  
  /* Call to action button enhancements */
  .transform.hover\:-translate-y-1:hover {
    transform: translateY(-4px) scale(1.02);
  }
  
  /* Responsive typography improvements */
  @media (max-width: 640px) {
    h1 {
      font-size: 2rem;
      line-height: 1.2;
    }
    
    .text-lg {
      font-size: 1rem;
    }
    
    .py-6 {
      padding-top: 1rem;
      padding-bottom: 1rem;
    }
    
    .py-8 {
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
    }
    
    .py-4 {
      padding-top: 0.75rem;
      padding-bottom: 0.75rem;
    }
  }
  
  /* Dark mode enhancements */
  .dark {
    color-scheme: dark;
  }
  
  .dark .bg-gray-50 {
    background-color: rgb(17 24 39);
  }
  
  .dark .bg-white {
    background-color: rgb(31 41 55);
  }
</style>

<script>
  // Intersection Observer for scroll animations
  const observeElements = () => {
    const elements = document.querySelectorAll('section');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '50px'
    });
    
    elements.forEach((el) => {
      el.style.opacity = '0.95';
      el.style.transform = 'translateY(10px)';
      el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(el);
    });
  };
  
  // Enhanced page performance tracking
  const trackPagePerformance = () => {
    // Track largest contentful paint
    new PerformanceObserver((list) => {
      const entries = list.getEntries();
      entries.forEach((entry) => {
        console.log('LCP:', entry.startTime);
      });
    }).observe({ type: 'largest-contentful-paint', buffered: true });
  };
  
  // Initialize when DOM is loaded
  document.addEventListener('DOMContentLoaded', () => {
    observeElements();
    trackPagePerformance();
  });
  
  // Preload critical resources
  const preloadResources = () => {
    // Preload hero carousel images
    const heroImages = [
      'https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',
      'https://img.youtube.com/vi/M7lc1UVf-VE/maxresdefault.jpg',
      'https://img.youtube.com/vi/PFlaiSCZAcU/maxresdefault.jpg',
      'https://img.youtube.com/vi/kJQP7kiw5Fk/maxresdefault.jpg'
    ];
    
    heroImages.forEach((src) => {
      const link = document.createElement('link');
      link.rel = 'preload';
      link.as = 'image';
      link.href = src;
      document.head.appendChild(link);
    });
  };
  
  // Preload resources on page load
  window.addEventListener('load', preloadResources);
</script>